<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Reset Password — VeriSure</title>

    <link rel="stylesheet" href="assets/css/base.css">
    <link rel="stylesheet" href="assets/css/layout.css">
    <link rel="stylesheet" href="assets/css/components.css">
    <link rel="stylesheet" href="assets/css/auth.css">
</head>

<body class="auth">

    <header class="navbar">
        <span>VeriSure</span>
        <nav class="nav-links">
            <a href="login.html">Back to login</a>
        </nav>
    </header>

    <main class="auth-split-container">
        <section class="auth-split-card">
            <aside class="auth-panel-left">
                <div class="auth-left-content">
                    <h2>Choose a new password</h2>
                    <p>Use at least 8 characters and avoid reusing old passwords.</p>
                    <div class="auth-visual-placeholder">Secure account update</div>
                </div>
                <div class="landing-footer">© VeriSure</div>
            </aside>

            <section class="auth-panel-right">
                <h2>Reset password</h2>

                <div id="resetError" class="reset-error hidden"></div>
                <div id="resetSuccess" class="reset-success hidden"></div>

                <div class="reset-password-fields">
                    <label for="newPassword">New password</label>
                    <input id="newPassword" type="password" minlength="8" />

                    <label for="confirmPassword">Confirm new password</label>
                    <input id="confirmPassword" type="password" minlength="8" />
                </div>

                <button id="resetBtn" class="btn-primary auth-btn" type="button">Update password</button>
            </section>
        </section>
    </main>

    <script>
        function show(el, msg) {
            el.textContent = msg;
            el.classList.remove("hidden");
        }

        function hide(el) {
            el.textContent = "";
            el.classList.add("hidden");
        }

        document.getElementById("resetBtn").addEventListener("click", () => {
            const p1 = document.getElementById("newPassword").value || "";
            const p2 = document.getElementById("confirmPassword").value || "";
            const err = document.getElementById("resetError");
            const ok = document.getElementById("resetSuccess");

            hide(err); hide(ok);

            if (p1.length < 8) return show(err, "Password must be at least 8 characters.");
            if (p1 !== p2) return show(err, "Passwords do not match.");

            show(ok, "Password updated successfully. Redirecting to login...");
            setTimeout(() => location.href = "login.html", 900);
        });
    </script>
</body>

</html>